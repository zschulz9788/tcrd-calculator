<!doctype html>
<html>
<body>
  <h2>Trip Credit Calculator</h2>

  <form method="post">
    <textarea name="schedule_text"
              rows="16"
              cols="80"
              placeholder="Paste your schedule text here..."
              required>{{ schedule_text }}</textarea>
    <br><br>
    <button type="submit">Calculate Trip Credit</button>
  </form>

  {% if total %}
    <hr>
    <p><strong>Base TCRD:</strong> {{ base }}</p>
    <p><strong>Holiday Bonus:</strong> {{ holiday }}</p>
    <p><strong>Total Trip Credit:</strong> {{ total }}</p>

    {% if holiday_dates and holiday_dates|length > 0 %}
      <p><strong>Holiday dates counted:</strong></p>
      <ul>
        {% for d in holiday_dates %}
          <li>{{ d }}</li>
        {% endfor %}
      </ul>
    {% endif %}

    <details style="margin-top: 18px;">
      <summary><strong>Show normalized schedule (day list blocks)</strong></summary>
      <pre style="white-space: pre-wrap; border: 1px solid #ccc; padding: 12px; margin-top: 10px;">{{ normalized }}</pre>
    </details>
  {% endif %}
</body>
</html>
