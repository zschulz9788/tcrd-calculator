<!doctype html>
<html>
<body>
  <h2>Trip Credit Calculator</h2>

  <form method="post">
    <textarea name="schedule_text"
              rows="16"
              cols="80"
              placeholder="Paste your schedule text here..."
              required>{{ request.form.get('schedule_text', '') }}</textarea>
    <br><br>

    <button type="submit" name="action" value="normalize">Normalize</button>
    <button type="submit" name="action" value="calculate">Calculate Trip Credit</button>
  </form>

  {% if normalized %}
    <h3>Normalized Schedule (one day per block)</h3>
    <pre style="white-space: pre-wrap; border:1px solid #ccc; padding:12px;">{{ normalized }}</pre>
  {% endif %}

  {% if total %}
    <hr>
    <p><strong>Base TCRD:</strong> {{ base }}</p>
    <p><strong>Holiday Bonus:</strong> {{ holiday }}</p>
    <p><strong>Total Trip Credit:</strong> {{ total }}</p>
  {% endif %}
</body>
</html>
